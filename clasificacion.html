<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Clasificaci√≥n ¬∑ C.D. El Ejido Futsal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="estilos.css">
</head>
<body>

<!-- ================= NAVEGACI√ìN ================= -->
<nav>
  <a href="index.html">üè† Plantilla</a>
  <a href="clasificacion.html" class="activo">üìä Clasificaci√≥n</a>
</nav>

<!-- ================= T√çTULO ================= -->
<div class="titulo-seccion">
  <div class="titulo-top">
    <h2>CD EL EJIDO FUTSAL ¬∑ CADETE "B" ¬∑ TEMPORADA 25/26</h2>
  </div>
  <div class="titulo-principal">
    CLASIFICACI√ìN
  </div>
</div>

<!-- ================= SELECTOR DE LIGA ================= -->
<div class="card fade jornada-card">
  <div class="liga-selector">
    <label for="selectorLiga">Selecciona Grupo:</label>
    <select id="selectorLiga">
      <option value="1" selected>Grupo 1</option>
      <option value="2">Grupo 2</option>
    </select>
  </div>
</div>

<!-- ================= SELECTOR DE JORNADA ================= -->
<div class="card fade jornada-card">
  <div class="jornada-ui">
    <button class="flecha" id="prevJornada" aria-label="Jornada anterior">‚Äπ</button>
    <div class="jornada-pill">
      <span class="jornada-label">JORNADA</span>
      <span id="jornadaActual" class="jornada-num">14</span>
    </div>
    <button class="flecha" id="nextJornada" aria-label="Jornada siguiente">‚Ä∫</button>
  </div>
  <select id="filtro" class="jornada-select"></select>
</div>

<!-- ================= CLASIFICACI√ìN ================= -->
<div class="card fade">
  <h2>üìä Clasificaci√≥n</h2>
  <table class="clasificacion">
    <thead>
      <tr>
        <th>Pos</th>
        <th>Equipo</th>
        <th>Pts</th>
        <th>PJ</th>
        <th>PG</th>
        <th>PE</th>
        <th>PP</th>
        <th>GF</th>
        <th>GC</th>
        <th>DG</th>
      </tr>
    </thead>
    <tbody id="tabla"></tbody>
  </table>
</div>

<!-- ================= PARTIDOS ================= -->
<div class="card fade">
  <h2>üóìÔ∏è Partidos de la jornada</h2>
  <table id="tabla-partidos">
    <thead>
      <tr>
        <th>Local</th>
        <th>Resultado</th>
        <th>Visitante</th>
      </tr>
    </thead>
    <tbody id="partidos"></tbody>
  </table>
  <div id="descanso"></div>
</div>

<!-- ================= V√çDEOS ================= -->
<div class="card fade">
  <h2>üé• V√≠deos de la jornada</h2>
  <div id="videos" class="videos"></div>
</div>

<!-- ================= FOOTER ================= -->
<footer>
  <h3>¬© C.D. El Ejido Futsal</h3>
  <h3>Hecho por Daniel Carralero Romera</h3>
</footer>

<script>

/* ===================== LIGA 1 ===================== */
const nombres = {
  EJI:"C.D. EL EJIDO FUTSAL",
  VIC:"C.D. V√çCAR VISTASOL F.S.",
  POLI:"C.D. POLI EJIDO C.F. B",
  DAL:"DAL√çAS C.F.",
  SLU:"C.D. SAN LUIS AT.",
  SPO:"SPORTING ALMER√çA B",
  ADR:"C.D. ADRA TRAFALGAR"
};

const escudos = {
  EJI:"escudos/ejido.png",
  VIC:"escudos/vicar.png",
  POLI:"escudos/poli.png",
  DAL:"escudos/dalias.png",
  SLU:"escudos/sanluis.png",
  SPO:"escudos/sporting.png",
  ADR:"escudos/adra.png"
};

const jornadas = {
  1:[["EJI","SLU",2,1],["DAL","VIC",2,6],["SPO","ADR",5,3],"POLI"],
  2:[["POLI","EJI",6,1],["VIC","SPO",6,0],["SLU","DAL",4,4],"ADR"],
  3:[["DAL","POLI",4,4],["SPO","SLU",5,4],["ADR","VIC",1,11],"EJI"],
  4:[["EJI","DAL",4,2],["SPO","POLI",5,7],["SLU","ADR",2,2],"VIC"],
  5:[["SPO","EJI",2,6],["VIC","SLU",20,1],["ADR","POLI",2,4],"DAL"],
  6:[["EJI","ADR",0,0],["DAL","SPO",3,2],["POLI","VIC",1,6],"SLU"],
  7:[["VIC","EJI",4,2],["SLU","POLI",8,5],["ADR","DAL",1,3],"SPO"],
  8:[["SLU","EJI",5,2],["ADR","SPO",3,3],["VIC","DAL",2,2],"POLI"],
  9:[["EJI","POLI",1,4],["DAL","SLU",6,2],["SPO","VIC",4,5],"ADR"],
  10:[["VIC","ADR",8,1],["SLU","SPO",3,3],["POLI","DAL",7,3],"EJI"],
  11:[["ADR","SLU",5,5],["SPO","POLI",6,6],["DAL","EJI",6,3],"VIC"],
  12:[["SLU","VIC",3,7],["POLI","ADR",1,2],["EJI","SPO",5,1],"DAL"],
  13:[["VIC","POLI",7,1],["ADR","EJI",4,2],["SPO","DAL",2,3],"SLU"],
  14:[["POLI","SLU","Suspendido"],["EJI","VIC",1,1],["DAL","ADR","Suspendido"],"SPO"]
};

/* ===================== VIDEOS LIGA 1 ===================== */
const videosPorJornada = {
  1:[{id:"ZDjvrf4VVCA",titulo:"Resumen"}],
  2:[{id:"0NSEhm_w2TM",titulo:"Primera parte"},{id:"NItFhz1g6rc",titulo:"Segunda parte"},{id:"4_yhTUxVB6w",titulo:"Resumen"}],
  4:[{id:"UV3MiJbDA2o",titulo:"Primera parte"},{id:"ut04Yxvvszg",titulo:"Segunda parte"},{id:"hUXPuUyUZQU",titulo:"Resumen"}],
  5:[{id:"njBDKJeuVCk",titulo:"Primera parte"},{id:"LyEIyiNNPEQ",titulo:"Segunda parte"},{id:"EpdoP3Y5LjM",titulo:"Resumen"}],
  6:[{id:"khD4vBpBay0",titulo:"Primera parte"},{id:"ReWH_Oyd7c8",titulo:"Segunda parte"},{id:"FzKHOd3BRhw",titulo:"Resumen"}],
  7:[{id:"PMy6Awye8V4",titulo:"Primera parte"},{id:"XHGge2RlZds",titulo:"Segunda parte"},{id:"BH8y4ZPz42w",titulo:"Resumen"}],
  8:[{id:"yunMOMfFL1c",titulo:"Primera parte"},{id:"WY3m7nQgJ5g",titulo:"Segunda parte"},{id:"5FRO8CiHvqE",titulo:"Resumen"}],
  9:[{id:"kK495iMMj5g",titulo:"Primera parte"},{id:"bqRUfRdMSmI",titulo:"Segunda parte"},{id:"Ktq3arKuhbw",titulo:"Resumen"}],
  11:[{id:"vE-apH_4guM",titulo:"Resumen"}],
  12:[{id:"oieddvN9jww",titulo:"Resumen"}],
  13:[{id:"YYCciQ5eyDk",titulo:"Primera parte"},{id:"lW_zhf8caog",titulo:"Segunda parte"},{id:"_c5_vDrnd_s",titulo:"Resumen"}],
  14:[{id:"EVq6sMFRepk",titulo:"Primera parte"},{id:"gaTvDJzz_J4",titulo:"Segunda parte"},{id:"mgXJbnyYQVc",titulo:"Resumen"}]
};

/* ===================== LIGA 2 ===================== */
const nombresLiga2 = {
  POLI:"C.D. POLI EJIDO C.F.",
  ALM:"C.D. ALMER√çA FUTSAL",
  AND:"C.D. A.D. ANDARAX ALHAMA",
  SPO:"C.D. SPORTING ALMER√çA ONLINEMENTE",
  CHI:"CHIRIVEL C.F.",
  COM:"C.D. COMARCA DE NIJAR FS FEMENINO",
  PUR:"C.D. CIUDAD DE PURCHENA FUTSAL"
};

const escudosLiga2 = {
  POLI:"escudos/poli.png",
  ALM:"escudos/almeria.png",
  AND:"escudos/andarax.png",
  SPO:"escudos/sporting.png",
  CHI:"escudos/chirivel.png",
  COM:"escudos/comarca.png",
  PUR:"escudos/purchena.png"
};

const jornadasLiga2 = {
  1:[["POLI","COM",2,2],["AND","ALM",4,7],["PUR","CHI",3,3],"SPO"],
  2:[["ALM","POLI",3,3],["CHI","AND",3,4],["SPO","PUR",4,2],"COM"],
  3:[["COM","ALM",5,6],["POLI","CHI",9,2],["AND","SPO",4,1],"PUR"],
  4:[["CHI","COM",4,3],["SPO","POLI",4,4],["PUR","AND",2,6],"ALM"],
  5:[["ALM","CHI",6,1],["COM","SPO",2,4],["POLI","PUR",6,1],"AND"],
  6:[["SPO","ALM",2,3],["PUR","COM",1,6],["AND","POLI",1,1],"CHI"],
  7:[["CHI","SPO",0,4],["ALM","PUR",10,0],["COM","AND",9,4],"POLI"],
  8:[["COM","POLI",1,4],["ALM","AND",6,2],["CHI","PUR",3,1],"SPO"],
  9:[["POLI","ALM",6,1],["AND","CHI",6,3],["PUR","SPO",0,3],"COM"],
  10:[["ALM","COM",7,2],["CHI","POLI",1,3],["SPO","AND",1,1],"PUR"],
  11:[["COM","CHI",2,3],["POLI","SPO",5,3],["AND","PUR",5,3],"ALM"],
  12:[["CHI","ALM",0,4],["SPO","COM",4,4],["PUR","POLI",2,5],"AND"],
  13:[["ALM","SPO",1,1],["COM","PUR",2,6],["POLI","AND",2,2],"CHI"],
  14:[["SPO","CHI","Suspendido"],["PUR","ALM","Suspendido"],["AND","COM","Suspendido"],"POLI"]
};

/* ===================== ELEMENTOS ===================== */
const filtro = document.getElementById("filtro");
const tabla = document.getElementById("tabla");
const partidos = document.getElementById("partidos");
const descanso = document.getElementById("descanso");
const videos = document.getElementById("videos");

const btnPrev = document.getElementById("prevJornada");
const btnNext = document.getElementById("nextJornada");
const jornadaActualSpan = document.getElementById("jornadaActual");

let ligaActual = 1;
let jornadaActual = 14;
const TOTAL_JORNADAS = 14;

/* ===================== FUNCIONES ===================== */

function cargarJornadas(){
  filtro.innerHTML="";
  for(let i=1;i<=TOTAL_JORNADAS;i++){
    filtro.innerHTML+=`<option value="${i}">Jornada ${i}</option>`;
  }
}

function actualizarJornada(){
  jornadaActualSpan.textContent = jornadaActual;
  filtro.value = jornadaActual;
  pintar(jornadaActual);
  btnPrev.disabled = jornadaActual === 1;
  btnNext.disabled = jornadaActual === TOTAL_JORNADAS;
}

btnPrev.addEventListener("click",()=>{
  if(jornadaActual>1){
    jornadaActual--;
    actualizarJornada();
  }
});

btnNext.addEventListener("click",()=>{
  if(jornadaActual<TOTAL_JORNADAS){
    jornadaActual++;
    actualizarJornada();
  }
});

document.getElementById("selectorLiga").addEventListener("change",e=>{
  ligaActual=parseInt(e.target.value);
  jornadaActual=TOTAL_JORNADAS;
  actualizarJornada();
});

filtro.addEventListener("change",e=>{
  jornadaActual=parseInt(e.target.value);
  actualizarJornada();
});

function pintar(j){

  let equipos, jornadasLiga, escudosLiga, videosJ;

  if(ligaActual==1){
    equipos=nombres;
    jornadasLiga=jornadas;
    escudosLiga=escudos;
    videosJ=videosPorJornada;
    videos.style.display="grid";
  }else{
    equipos=nombresLiga2;
    jornadasLiga=jornadasLiga2;
    escudosLiga=escudosLiga2;
    videosJ={};
    videos.style.display="none";
  }

  const stats={};
  Object.keys(equipos).forEach(e=>{
    stats[e]={PJ:0,PG:0,PE:0,PP:0,GF:0,GC:0,Pts:0};
  });

  for(let i=1;i<=j;i++){
    jornadasLiga[i].forEach(p=>{
      if(typeof p==="string") return;
      if(typeof p[2]!=="number") return;
      const[l,v,gl,gv]=p;
      stats[l].PJ++;stats[v].PJ++;
      stats[l].GF+=gl;stats[l].GC+=gv;
      stats[v].GF+=gv;stats[v].GC+=gl;

      if(gl>gv){stats[l].PG++;stats[l].Pts+=3;stats[v].PP++;}
      else if(gl<gv){stats[v].PG++;stats[v].Pts+=3;stats[l].PP++;}
      else{stats[l].PE++;stats[v].PE++;stats[l].Pts++;stats[v].Pts++;}
    });
  }

  tabla.innerHTML="";
  Object.entries(stats)
    .sort((a,b)=>{
      if(b[1].Pts!==a[1].Pts) return b[1].Pts-a[1].Pts;
      const dgA=a[1].GF-a[1].GC;
      const dgB=b[1].GF-b[1].GC;
      if(dgB!==dgA) return dgB-dgA;
      return b[1].GF-a[1].GF;
    })
    .forEach((e,i)=>{
      const d=e[1];
      tabla.innerHTML+=`
        <tr class="${e[0]==='EJI'?'ejido':''}">
          <td>${i+1}</td>
          <td>
            <div class="equipo">
              <img class="escudo" src="${escudosLiga[e[0]]}">
              <span class="nombre-equipo">${equipos[e[0]]}</span>
            </div>
          </td>
          <td class="puntos">${d.Pts}</td>
          <td>${d.PJ}</td>
          <td>${d.PG}</td>
          <td>${d.PE}</td>
          <td>${d.PP}</td>
          <td>${d.GF}</td>
          <td>${d.GC}</td>
          <td>${d.GF-d.GC}</td>
        </tr>`;
    });

  partidos.innerHTML="";
  jornadasLiga[j].forEach(p=>{
    if(typeof p==="string") return;
    let resultado="";
    if(p[2]==="Suspendido"){
      resultado=`<div class="resultado-flex"><img class="escudo mini" src="${escudosLiga[p[0]]}"><span class="suspendido">Suspendido</span><img class="escudo mini" src="${escudosLiga[p[1]]}"></div>`;
    }else{
      resultado=`<div class="resultado-flex"><img class="escudo mini" src="${escudosLiga[p[0]]}"><span class="marcador">${p[2]} - ${p[3]}</span><img class="escudo mini" src="${escudosLiga[p[1]]}"></div>`;
    }
    partidos.innerHTML+=`
      <tr class="${p[0]==='EJI'?'ejido':''}">
        <td class="local">${equipos[p[0]]}</td>
        <td class="resultado">${resultado}</td>
        <td class="visitante">${equipos[p[1]]}</td>
      </tr>`;
  });

  const d=jornadasLiga[j].find(x=>typeof x==="string");
  descanso.innerHTML=d?`
    <div class="descanso equipo">
      <img src="${escudosLiga[d]}" class="escudo">
      Descansa: ${equipos[d]}
    </div>`:"";

  videos.innerHTML="";
  (videosJ[j]||[]).forEach(v=>{
    videos.innerHTML+=`
      <a class="video-card" target="_blank" href="https://youtu.be/${v.id}">
        <img src="https://img.youtube.com/vi/${v.id}/hqdefault.jpg">
        <p>${v.titulo}</p>
      </a>`;
  });
}

/* ===================== INICIAL ===================== */
cargarJornadas();
actualizarJornada();

</script>

</body>
</html>
