<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C.D. El Ejido Futsal 췅 Plantilla</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    th { cursor: pointer; }
    th:hover { text-decoration: underline; }
    .foto-jugador { width: 30px; height: 45px; object-fit: cover; border-radius: 12px; }
    #plantilla td:nth-child(2), #plantilla th:nth-child(2) { width: 40px; padding: 4px 2px; }
    #plantilla td:nth-child(1), #plantilla th:nth-child(1) { width: 55px; padding: 4px 2px; }
    #plantilla td:nth-child(6), #plantilla th:nth-child(6) { width: 80px; padding: 4px 2px; }
  </style>
</head>
<body>

<!-- ================= NAVEGACI칍N ================= -->
<nav>
  <a href="index.html" class="activo">游 Plantilla</a>
  <a href="clasificacion.html">游늵 Clasificaci칩n</a>
</nav>

<!-- ================= T칈TULO ================= -->
<div class="titulo-seccion">
  <div class="titulo-top">
    <h2>CD EL EJIDO FUTSAL 췅 CADETE "B" 췅 TEMPORADA 25/26</h2>
  </div>
  <div class="titulo-principal">
    PLANTILLA
  </div>
</div>

<!-- ================= IMAGEN EQUIPO ================= -->
<div class="card fade equipo-card">
  <img id="Equipo" src="equipo.png" alt="CD El Ejido Futsal">
  <div class="equipo-info">
    Equipo del C.D. El Ejido Futsal
  </div>
</div>

<!-- ================= TABLA PLANTILLA ================= -->
<div class="card fade">
  <h2>游논 Jugadores del equipo</h2>
  <table id="plantilla">
    <thead>
      <tr>
        <th>N췈</th><th>IMG</th><th>JUG</th><th>POS</th><th>EDAD</th><th>FECHA NAC.</th>
        <th>PJ</th><th>TIT</th><th>SUP</th><th>NOC</th><th>GOLES</th>
        <th>ASIST.</th><th>MG</th><th>AMA</th><th>ROJ</th>
      </tr>
    </thead>
    <tbody id="tbodyPlantilla"></tbody>
  </table>
</div>

<!-- ================= RANKINGS ================= -->
<div class="card fade">
  <div class="rankings">

    <!-- GOLEADORES -->
    <div class="ranking-card">
      <table class="ranking">
        <thead>
          <tr><th colspan="3">游볜 Ranking de goleadores</th></tr>
          <tr><th>Pos</th><th>Jugador</th><th>Goles</th></tr>
        </thead>
        <tbody id="rankingGoles"></tbody>
      </table>
    </div>

    <!-- ASISTENCIAS -->
    <div class="ranking-card">
      <table class="ranking">
        <thead>
          <tr><th colspan="3">游꿢 Ranking de asistencias</th></tr>
          <tr><th>Pos</th><th>Jugador</th><th>Asistencias</th></tr>
        </thead>
        <tbody id="rankingAsist"></tbody>
      </table>
    </div>

  </div>
</div>

<!-- ================= FOOTER ================= -->
<footer>
  <h3>춸 C.D. El Ejido Futsal</h3>
  <h3>Hecho por Daniel Carralero Romera</h3>
</footer>

<!-- ================= SCRIPT ================= -->
<script>
/* ================= FUNCI칍N CALCULAR EDAD ================= */
function calcularEdad(fecha){
  if(fecha==="-"||fecha==="00/00/2013"||fecha==="00/00/2011") return "-";
  const [d,m,y]=fecha.split("/");
  const nacimiento=new Date(y,m-1,d);
  const hoy=new Date();
  let edad=hoy.getFullYear()-nacimiento.getFullYear();
  const cumpleEsteA침o=new Date(hoy.getFullYear(),nacimiento.getMonth(),nacimiento.getDate());
  if(hoy<cumpleEsteA침o) edad--;
  return edad;
}

/* ================= NOMBRE A FOTO ================= */
function nombreArchivo(nombre){
  let n=nombre.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");
  return "Fotos_equipo/" + n + ".jpg";
}

/* ================= DATOS JUGADORES ================= */
const jugadores=[
  {n:15,nombre:"Juanma",pos:"Portero",fn:"11/04/2011",pj:12,tit:11,sup:1,noc:0,g:0,a:1,ama:0,roj:0},
  {n:17,nombre:"Luis",pos:"Portero",fn:"17/08/2011",pj:12,tit:1,sup:11,noc:0,g:1,a:0,ama:0,roj:0},
  {n:8,nombre:"Iv치n",pos:"P칤vot",fn:"13/12/2011",pj:5,tit:0,sup:5,noc:3,g:0,a:0,ama:0,roj:0},
  {n:9,nombre:"Juan Antonio",pos:"Ala P칤vot",fn:"09/11/2011",pj:10,tit:0,sup:10,noc:2,g:1,a:1,ama:0,roj:0},
  {n:11,nombre:"Javier",pos:"Ala",fn:"13/12/2011",pj:12,tit:7,sup:5,noc:0,g:2,a:3,ama:0,roj:0},
  {n:14,nombre:"Juan",pos:"Ala P칤vot",fn:"12/11/2011",pj:12,tit:12,sup:0,noc:0,g:10,a:4,ama:1,roj:0},
  {n:16,nombre:"Alejandro",pos:"Ala",fn:"04/08/2011",pj:12,tit:4,sup:8,noc:0,g:4,a:4,ama:1,roj:0},
  {n:21,nombre:"Daniel",pos:"Ala",fn:"28/12/2011",pj:9,tit:2,sup:7,noc:3,g:1,a:0,ama:1,roj:0},
  {n:22,nombre:"Pablo",pos:"Cierre",fn:"20/01/2011",pj:12,tit:12,sup:0,noc:0,g:3,a:0,ama:4,roj:0},
  {n:24,nombre:"Iker",pos:"Universal",fn:"30/09/2011",pj:11,tit:10,sup:1,noc:1,g:5,a:1,ama:2,roj:0},
  {n:27,nombre:"Miguel",pos:"Ala",fn:"00/00/2013",pj:2,tit:0,sup:2,noc:0,g:0,a:0,ama:0,roj:0},
  {n:30,nombre:"Domingo",pos:"P칤vot",fn:"00/00/2011",pj:7,tit:0,sup:7,noc:5,g:1,a:1,ama:1,roj:0},
  {n:77,nombre:"Pedro",pos:"Ala Cierre",fn:"00/00/2013",pj:3,tit:1,sup:2,noc:0,g:1,a:0,ama:0,roj:0},
  {n:88,nombre:"Aleix",pos:"Ala",fn:"00/00/2013",pj:1,tit:0,sup:1,noc:0,g:0,a:0,ama:0,roj:0},
];

jugadores.forEach(j=>j.foto=nombreArchivo(j.nombre));

const posicionesOrden=["Portero","Cierre","Ala Cierre","Ala","Ala P칤vot","P칤vot","Universal"];
const tbody=document.getElementById("tbodyPlantilla");

function renderTabla(data){
  tbody.innerHTML=data.map(j=>{
    const mg=j.pj?(j.g/j.pj).toFixed(2):"0.00";
    return `<tr>
      <td>${j.n}</td>
      <td><img src="${j.foto}" alt="${j.nombre}" class="foto-jugador"></td>
      <td>${j.nombre}</td>
      <td>${j.pos}</td>
      <td>${calcularEdad(j.fn)}</td>
      <td>${j.fn}</td>
      <td>${j.pj}</td>
      <td>${j.tit}</td>
      <td>${j.sup}</td>
      <td>${j.noc}</td>
      <td>${j.g}</td>
      <td>${j.a}</td>
      <td>${mg}</td>
      <td>${j.ama}</td>
      <td>${j.roj}</td>
    </tr>`;
  }).join("");
}

const dataInicial=[...jugadores].sort((a,b)=>{
  const posA=posicionesOrden.indexOf(a.pos), posB=posicionesOrden.indexOf(b.pos);
  return posA!==posB? posA-posB : a.n-b.n;
});

renderTabla(dataInicial);

// Orden click en headers
const headers=document.querySelectorAll("#plantilla th");
const orden={};

headers.forEach((th,i)=>{
  th.addEventListener("click",()=>{
    const keyMap={0:"n",2:"nombre",3:"pos",4:"edad",5:"fn",6:"pj",7:"tit",8:"sup",9:"noc",10:"g",11:"a",12:"mg",13:"ama",14:"roj"};
    const key=keyMap[i];
    orden[key]=orden[key]==="asc"?"desc":"asc"||"asc";
    const data=[...document.querySelectorAll("#tbodyPlantilla tr")].map(tr=>{
      const tds=tr.children;
      return {
        n:parseInt(tds[0].textContent),
        foto:tds[1].querySelector("img").src,
        nombre:tds[2].textContent,
        pos:tds[3].textContent,
        edad:tds[4].textContent,
        fn:tds[5].textContent,
        pj:parseInt(tds[6].textContent),
        tit:parseInt(tds[7].textContent),
        sup:parseInt(tds[8].textContent),
        noc:parseInt(tds[9].textContent),
        g:parseInt(tds[10].textContent),
        a:parseInt(tds[11].textContent),
        mg:parseFloat(tds[12].textContent),
        ama:parseInt(tds[13].textContent),
        roj:parseInt(tds[14].textContent)
      };
    });

    data.sort((a,b)=>{
      if(key==="pos") return orden[key]==="asc"? posicionesOrden.indexOf(a.pos)-posicionesOrden.indexOf(b.pos) : posicionesOrden.indexOf(b.pos)-posicionesOrden.indexOf(a.pos);
      if(typeof a[key]==="number") return orden[key]==="asc"? a[key]-b[key] : b[key]-a[key];
      return orden[key]==="asc"? a[key].localeCompare(b[key]) : b[key].localeCompare(a[key]);
    });

    renderTabla(data);
  });
});

// Rankings
const rankingG=document.getElementById("rankingGoles");
const rankingA=document.getElementById("rankingAsist");
const medallas=["游볞","游볟","游볠"];

rankingG.innerHTML=[...jugadores].sort((a,b)=>b.g!==a.g? b.g-a.g : a.pj-b.pj)
  .map((j,i)=>`<tr><td>${medallas[i]||i+1}</td><td>${j.nombre}</td><td>${j.g}</td></tr>`).join("");

rankingA.innerHTML=[...jugadores].sort((a,b)=>b.a!==a.a? b.a-a.a : a.pj-b.pj)
  .map((j,i)=>`<tr><td>${medallas[i]||i+1}</td><td>${j.nombre}</td><td>${j.a}</td></tr>`).join("");
</script>
</body>
</html>